{"remainingRequest":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\src\\components\\Freets\\UpvoteButton.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\src\\components\\Freets\\UpvoteButton.vue","mtime":1636397227417},{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLyBpbXBvcnQgeyBkZWZpbmVDb21wb25lbnQgfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaScKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgZXZlbnRCdXMgfSBmcm9tICIuLi8uLi9tYWluIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJVcHZvdGVCdXR0b24iLAogIHByb3BzOiB7CiAgICBmcmVldDogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgdXNlck5hbWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVwVm90ZUJ1dHRvbjogewogICAgICAgIHRleHQ6ICdVcHZvdGUnCiAgICAgIH0sCiAgICAgIHNob3dVcHZvdGVyczogZmFsc2UsCiAgICAgIHVwdm90ZWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuVXBkYXRlU3RhdHVzKCk7IC8vIGV2ZW50QnVzLiRvbihbInVwdm90ZS1mcmVldC1zdWNjZXNzIiwgInVudXB2b3RlLWZyZWV0LXN1Y2Nlc3MiXSwoKSA9PnsKICAgIC8vICAgICAgICB0aGlzLlVwZGF0ZVN0YXR1cygpOwogICAgLy8gfSkKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vc29tZSBwcm9ibGVtIHdpdGggdGhpcwogICAgVXBkYXRlU3RhdHVzOiBmdW5jdGlvbiBVcGRhdGVTdGF0dXMoKSB7CiAgICAgIGlmICh0aGlzLmZyZWV0LnVwdm90ZXJzLmluY2x1ZGVzKHRoaXMudXNlck5hbWUpKSB7CiAgICAgICAgdGhpcy51cHZvdGVkID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnVwdm90ZWQgPSBmYWxzZTsKICAgICAgfQoKICAgICAgdGhpcy51cFZvdGVCdXR0b24udGV4dCA9IHRoaXMudXB2b3RlZCA/ICdVbnVwdm90ZScgOiAnVXB2b3RlJzsKICAgIH0sCiAgICBVcHZvdGVGcmVldDogZnVuY3Rpb24gVXB2b3RlRnJlZXQoKSB7CiAgICAgIGF4aW9zLnBvc3QoIi9hcGkvZnJlZXRzL3Vwdm90ZS8iICsgdGhpcy5mcmVldC5pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBldmVudEJ1cy4kZW1pdCgidXB2b3RlLWZyZWV0LXN1Y2Nlc3MiLCB7CiAgICAgICAgICBkYXRhOiByZXNwb25zZS5kYXRhCiAgICAgICAgfSk7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOyAvLyB0aGlzLlVwZGF0ZVN0YXR1cygpCiAgICAgICAgLy8gdGhpcy51cHZvdGVkPXRydWU7CiAgICAgICAgLy8gdGhpcy51cFZvdGVCdXR0b24udGV4dCA9IHRoaXMudXB2b3RlZCA/ICdVbnVwdm90ZScgOiAnVXB2b3RlJzsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLnN0YXR1cyAhPSAyMDApIHsKICAgICAgICAgIGFsZXJ0KGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgVW5VcHZvdGVGcmVldDogZnVuY3Rpb24gVW5VcHZvdGVGcmVldCgpIHsKICAgICAgYXhpb3MucHV0KCIvYXBpL2ZyZWV0cy91bnVwdm90ZS8iICsgdGhpcy5mcmVldC5pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBldmVudEJ1cy4kZW1pdCgidW51cHZvdGUtZnJlZXQtc3VjY2VzcyIsIHsKICAgICAgICAgIGRhdGE6IHJlc3BvbnNlLmRhdGEKICAgICAgICB9KTsgLy8gdGhpcy51cHZvdGVkPWZhbHNlOwogICAgICAgIC8vIHRoaXMudXBWb3RlQnV0dG9uLnRleHQgPSB0aGlzLnVwdm90ZWQgPyAnVW51cHZvdGUnIDogJ1Vwdm90ZSc7CiAgICAgICAgLy8gdGhpcy5VcGRhdGVTdGF0dXMoKQoKICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGlmIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5zdGF0dXMgIT0gMjAwKSB7CiAgICAgICAgICBhbGVydChlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["UpvoteButton.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAgBA;AACA,OAAA,KAAA,MAAA,OAAA;AACA,SAAA,QAAA,QAAA,YAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AALA,GAFA;AAYA,EAAA,IAZA,kBAYA;AACA,WAAA;AACA,MAAA,YAAA,EAAA;AACA,QAAA,IAAA,EAAA;AADA,OADA;AAIA,MAAA,YAAA,EAAA,KAJA;AAKA,MAAA,OAAA,EAAA;AALA,KAAA;AAQA,GArBA;AAsBA,EAAA,OAtBA,qBAsBA;AACA,SAAA,YAAA,GADA,CAEA;AACA;AACA;AAGA,GA7BA;AA8BA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,YAFA,0BAEA;AACA,UAAA,KAAA,KAAA,CAAA,QAAA,CAAA,QAAA,CAAA,KAAA,QAAA,CAAA,EAAA;AACA,aAAA,OAAA,GAAA,IAAA;AACA,OAFA,MAEA;AACA,aAAA,OAAA,GAAA,KAAA;AACA;;AACA,WAAA,YAAA,CAAA,IAAA,GAAA,KAAA,OAAA,GAAA,UAAA,GAAA,QAAA;AACA,KATA;AAUA,IAAA,WAVA,yBAUA;AACA,MAAA,KAAA,CAAA,IAAA,CAAA,wBAAA,KAAA,KAAA,CAAA,EAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,QAAA,CAAA,KAAA,CAAA,sBAAA,EAAA;AACA,UAAA,IAAA,EAAA,QAAA,CAAA;AADA,SAAA;AAGA,QAAA,MAAA,CAAA,QAAA,CAAA,MAAA,GAJA,CAKA;AACA;AACA;AACA,OATA,EAUA,KAVA,CAUA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA,IAAA,KAAA,CAAA,QAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,KAAA,CAAA;AACA;AACA,OAdA;AAeA,KA1BA;AA2BA,IAAA,aA3BA,2BA2BA;AACA,MAAA,KAAA,CAAA,GAAA,CAAA,0BAAA,KAAA,KAAA,CAAA,EAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,QAAA,CAAA,KAAA,CAAA,wBAAA,EAAA;AACA,UAAA,IAAA,EAAA,QAAA,CAAA;AADA,SAAA,EADA,CAIA;AACA;AAEA;;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,MAAA;AACA,OAVA,EAWA,KAXA,CAWA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA,IAAA,KAAA,CAAA,QAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,KAAA,CAAA;AACA;AACA,OAfA;AAgBA;AA5CA;AA9BA,CAAA","sourcesContent":["<template>\r\n    <div class=\"upvote\">\r\n    <button  \r\n      class=\"freet-btn\" \r\n      @mouseover=\"showUpvoters=true\"\r\n      @mouseleave=\"showUpvoters=false\"\r\n      v-on:click.prevent=\"upvoted ? UnUpvoteFreet() : UpvoteFreet()\" \r\n      ><i class=\"fa fa-heart \" ></i> {{upVoteButton.text}} {{ freet.numUpvotes }}\r\n    </button>\r\n    <div v-show=\"showUpvoters\">\r\n      <span> {{ freet.upvoters.join(', ')}}</span>\r\n    </div>\r\n    </div>\r\n\r\n</template>\r\n<script>\r\n// import { defineComponent } from '@vue/composition-api'\r\nimport axios from 'axios';\r\nimport { eventBus } from \"../../main\";\r\nexport default {\r\n    name:\"UpvoteButton\",\r\n    props:{\r\n       freet:{\r\n           type: Object,\r\n           required: true\r\n       },\r\n       userName:{\r\n           type: String,\r\n           required: true\r\n       }\r\n   },\r\n    data() {\r\n       return{\r\n            upVoteButton:{\r\n                text: 'Upvote'\r\n            },\r\n            showUpvoters: false,\r\n            upvoted: false,\r\n     \r\n       }\r\n   },\r\n    created() {\r\n        this.UpdateStatus();\r\n        // eventBus.$on([\"upvote-freet-success\", \"unupvote-freet-success\"],() =>{\r\n        //        this.UpdateStatus();\r\n        // })\r\n      \r\n       \r\n  },\r\n    methods:{\r\n        //some problem with this\r\n    UpdateStatus(){\r\n        if(this.freet.upvoters.includes(this.userName)){\r\n            this.upvoted=true;\r\n        }else{\r\n         this.upvoted=false;\r\n        }\r\n        this.upVoteButton.text = this.upvoted ? 'Unupvote' : 'Upvote';\r\n    },\r\n    UpvoteFreet(){\r\n        axios.post(\"/api/freets/upvote/\" + this.freet.id)\r\n            .then((response) => {\r\n            eventBus.$emit(\"upvote-freet-success\",{\r\n                data: response.data,\r\n            }); \r\n            window.location.reload()\r\n            // this.UpdateStatus()\r\n            // this.upvoted=true;\r\n            // this.upVoteButton.text = this.upvoted ? 'Unupvote' : 'Upvote';\r\n            })\r\n            .catch((error) => {\r\n                if (error.response && error.response.status != 200){\r\n                alert(error.response.data.error)\r\n                }\r\n            })\r\n        },\r\n    UnUpvoteFreet(){\r\n        axios.put(\"/api/freets/unupvote/\" + this.freet.id)\r\n            .then((response) => {\r\n            eventBus.$emit(\"unupvote-freet-success\",{\r\n                data: response.data,\r\n            }); \r\n            // this.upvoted=false;\r\n            // this.upVoteButton.text = this.upvoted ? 'Unupvote' : 'Upvote';\r\n\r\n            // this.UpdateStatus()\r\n            window.location.reload()\r\n            })\r\n            .catch((error) => {\r\n                if (error.response && error.response.status != 200){\r\n                alert(error.response.data.error)\r\n                }\r\n            })\r\n        },\r\n   }\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n</style>\r\n"],"sourceRoot":"src/components/Freets"}]}