{"remainingRequest":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\src\\components\\Users\\FollowButton.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\src\\components\\Users\\FollowButton.vue","mtime":1636314938184},{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBldmVudEJ1cyB9IGZyb20gIi4uLy4uL21haW4iOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkZvbGxvd0J1dHRvbiIsCiAgcHJvcHM6IHsKICAgIGZyZWV0OiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICB1c2VyTmFtZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9sbG93ZWQ6IGZhbHNlLAogICAgICB1c2VyUHJvZmlsZTogbnVsbCwKICAgICAgZm9sbG93QnV0dG9uOiB7CiAgICAgICAgdGV4dDogJyBGb2xsb3cnCiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLmdldFVzZXIoKTsKICAgIGV2ZW50QnVzLiRvbihbImZvbGxvdy11c2VyLXN1Y2Nlc3MiLCAidW5mb2xsb3ctdXNlci1zdWNjZXNzIl0sIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuZ2V0VXNlcigpOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRVc2VyOiBmdW5jdGlvbiBnZXRVc2VyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGF4aW9zLmdldCgnYXBpL3VzZXJzLycgKyB0aGlzLnVzZXJOYW1lKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi51c2VyUHJvZmlsZSA9IHJlc3BvbnNlLmRhdGEudXNlcjsKCiAgICAgICAgaWYgKF90aGlzMi51c2VyUHJvZmlsZS5mb2xsb3dpbmdzLmluY2x1ZGVzKF90aGlzMi5mcmVldC5hdXRob3IpKSB7CiAgICAgICAgICBfdGhpczIuZm9sbG93ZWQgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczIuZm9sbG93ZWQgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIF90aGlzMi5mb2xsb3dCdXR0b24udGV4dCA9IF90aGlzMi5mb2xsb3dlZCA/ICcgRm9sbG93aW5nJyA6ICcgRm9sbG93JzsKICAgICAgfSk7CiAgICB9LAogICAgRm9sbG93OiBmdW5jdGlvbiBGb2xsb3coKSB7CiAgICAgIGF4aW9zLnBvc3QoImFwaS91c2Vycy9mb2xsb3dpbmcvIiArIHRoaXMuZnJlZXQuYXV0aG9yKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGV2ZW50QnVzLiRlbWl0KCJmb2xsb3ctdXNlci1zdWNjZXNzIiwgewogICAgICAgICAgZGF0YTogcmVzcG9uc2UuZGF0YQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2Uuc3RhdHVzICE9IDIwMCkgewogICAgICAgICAgYWxlcnQoZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBVbkZvbGxvdzogZnVuY3Rpb24gVW5Gb2xsb3coKSB7CiAgICAgIGF4aW9zLnB1dCgiYXBpL3VzZXJzL3VuZm9sbG93aW5nLyIgKyB0aGlzLmZyZWV0LmF1dGhvcikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBldmVudEJ1cy4kZW1pdCgidW5mb2xsb3ctdXNlci1zdWNjZXNzIiwgewogICAgICAgICAgZGF0YTogcmVzcG9uc2UuZGF0YQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2Uuc3RhdHVzICE9IDIwMCkgewogICAgICAgICAgYWxlcnQoZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["FollowButton.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA,OAAA,KAAA,MAAA,OAAA;AACA,SAAA,QAAA,QAAA,YAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AALA,GAFA;AAYA,EAAA,IAZA,kBAYA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,KADA;AAEA,MAAA,WAAA,EAAA,IAFA;AAGA,MAAA,YAAA,EAAA;AACA,QAAA,IAAA,EAAA;AADA;AAHA,KAAA;AAOA,GApBA;AAqBA,EAAA,OArBA,qBAqBA;AAAA;;AACA,SAAA,OAAA;AACA,IAAA,QAAA,CAAA,GAAA,CAAA,CAAA,qBAAA,EAAA,uBAAA,CAAA,EAAA,YAAA;AACA,MAAA,KAAA,CAAA,OAAA;AACA,KAFA;AAGA,GA1BA;AA2BA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AAAA;;AACA,MAAA,KAAA,CAAA,GAAA,CAAA,eAAA,KAAA,QAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,WAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;;AACA,YAAA,MAAA,CAAA,WAAA,CAAA,UAAA,CAAA,QAAA,CAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,GAAA,IAAA;AACA,SAFA,MAEA;AACA,UAAA,MAAA,CAAA,QAAA,GAAA,KAAA;AACA;;AAEA,QAAA,MAAA,CAAA,YAAA,CAAA,IAAA,GAAA,MAAA,CAAA,QAAA,GAAA,YAAA,GAAA,SAAA;AACA,OAVA;AAWA,KAbA;AAcA,IAAA,MAdA,oBAcA;AACA,MAAA,KAAA,CAAA,IAAA,CAAA,yBAAA,KAAA,KAAA,CAAA,MAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,QAAA,CAAA,KAAA,CAAA,qBAAA,EAAA;AACA,UAAA,IAAA,EAAA,QAAA,CAAA;AADA,SAAA;AAIA,OANA,EAOA,KAPA,CAOA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA,IAAA,KAAA,CAAA,QAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,KAAA,CAAA;AACA;AACA,OAXA;AAaA,KA5BA;AA6BA,IAAA,QA7BA,sBA6BA;AACA,MAAA,KAAA,CAAA,GAAA,CAAA,2BAAA,KAAA,KAAA,CAAA,MAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,QAAA,CAAA,KAAA,CAAA,uBAAA,EAAA;AACA,UAAA,IAAA,EAAA,QAAA,CAAA;AADA,SAAA;AAIA,OANA,EAOA,KAPA,CAOA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA,IAAA,KAAA,CAAA,QAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,KAAA,CAAA;AACA;AACA,OAXA;AAcA;AA5CA;AA3BA,CAAA","sourcesContent":["<template>\r\n    <div class=\"follow\">\r\n    <button\r\n        class=\"button\"\r\n        v-show=\"userName!==freet.author\"\r\n        v-on:click=\"followed? UnFollow() : Follow()\"\r\n        ><i class=\"fa fa-plus\" v-show=\"!followed\" aria-hidden=\"true\"></i>\r\n        {{followButton.text}}\r\n    </button>\r\n    </div>\r\n\r\n</template>\r\n<script>\r\n\r\nimport axios from 'axios';\r\nimport { eventBus } from \"../../main\";\r\nexport default {\r\n    name:\"FollowButton\",\r\n    props: {\r\n       freet: {\r\n           type: Object,\r\n           required: true\r\n       },\r\n       userName:{\r\n           type: String,\r\n           required: true\r\n       }\r\n   },\r\n    data() {\r\n       return{\r\n            followed: false,\r\n            userProfile: null,\r\n            followButton:{\r\n                text: ' Follow'\r\n            },\r\n       }\r\n   },\r\n    created() {\r\n      this.getUser();\r\n        eventBus.$on([\"follow-user-success\",\"unfollow-user-success\"], ()=>{\r\n            this.getUser();\r\n        });\r\n    },\r\n    methods:{\r\n        getUser(){\r\n        axios.get('api/users/' + this.userName)\r\n            .then((response) => {\r\n                this.userProfile = response.data.user;\r\n                if(this.userProfile.followings.includes(this.freet.author)){\r\n                    this.followed = true;\r\n                }else{\r\n                    this.followed = false;\r\n                }\r\n\r\n                this.followButton.text = this.followed ? ' Following' : ' Follow';\r\n       })\r\n    },\r\n        Follow(){\r\n            axios.post(\"api/users/following/\" + this.freet.author)\r\n            .then((response) => {\r\n                eventBus.$emit(\"follow-user-success\",{\r\n                    data: response.data,\r\n                }); \r\n                \r\n            })\r\n            .catch((error) => {\r\n                if (error.response && error.response.status != 200){\r\n                alert(error.response.data.error)\r\n                }\r\n            })\r\n            \r\n       },\r\n       UnFollow(){\r\n           axios.put(\"api/users/unfollowing/\" + this.freet.author)\r\n            .then((response) => {\r\n                eventBus.$emit(\"unfollow-user-success\",{\r\n                    data: response.data,\r\n                }); \r\n            \r\n                            })\r\n            .catch((error) => {\r\n                if (error.response && error.response.status != 200){\r\n                alert(error.response.data.error)\r\n                }\r\n            })\r\n\r\n\r\n       }\r\n\r\n   },\r\n}\r\n</script>\r\n"],"sourceRoot":"src/components/Users"}]}