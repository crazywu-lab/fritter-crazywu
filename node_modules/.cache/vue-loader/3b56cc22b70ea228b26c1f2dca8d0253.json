{"remainingRequest":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\src\\components\\Freets\\UpvoteButton.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\src\\components\\Freets\\UpvoteButton.vue","mtime":1636397227417},{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBpbXBvcnQgeyBkZWZpbmVDb21wb25lbnQgfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaScNCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7DQppbXBvcnQgeyBldmVudEJ1cyB9IGZyb20gIi4uLy4uL21haW4iOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6IlVwdm90ZUJ1dHRvbiIsDQogICAgcHJvcHM6ew0KICAgICAgIGZyZWV0OnsNCiAgICAgICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQ0KICAgICAgIH0sDQogICAgICAgdXNlck5hbWU6ew0KICAgICAgICAgICB0eXBlOiBTdHJpbmcsDQogICAgICAgICAgIHJlcXVpcmVkOiB0cnVlDQogICAgICAgfQ0KICAgfSwNCiAgICBkYXRhKCkgew0KICAgICAgIHJldHVybnsNCiAgICAgICAgICAgIHVwVm90ZUJ1dHRvbjp7DQogICAgICAgICAgICAgICAgdGV4dDogJ1Vwdm90ZScNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBzaG93VXB2b3RlcnM6IGZhbHNlLA0KICAgICAgICAgICAgdXB2b3RlZDogZmFsc2UsDQogICAgIA0KICAgICAgIH0NCiAgIH0sDQogICAgY3JlYXRlZCgpIHsNCiAgICAgICAgdGhpcy5VcGRhdGVTdGF0dXMoKTsNCiAgICAgICAgLy8gZXZlbnRCdXMuJG9uKFsidXB2b3RlLWZyZWV0LXN1Y2Nlc3MiLCAidW51cHZvdGUtZnJlZXQtc3VjY2VzcyJdLCgpID0+ew0KICAgICAgICAvLyAgICAgICAgdGhpcy5VcGRhdGVTdGF0dXMoKTsNCiAgICAgICAgLy8gfSkNCiAgICAgIA0KICAgICAgIA0KICB9LA0KICAgIG1ldGhvZHM6ew0KICAgICAgICAvL3NvbWUgcHJvYmxlbSB3aXRoIHRoaXMNCiAgICBVcGRhdGVTdGF0dXMoKXsNCiAgICAgICAgaWYodGhpcy5mcmVldC51cHZvdGVycy5pbmNsdWRlcyh0aGlzLnVzZXJOYW1lKSl7DQogICAgICAgICAgICB0aGlzLnVwdm90ZWQ9dHJ1ZTsNCiAgICAgICAgfWVsc2V7DQogICAgICAgICB0aGlzLnVwdm90ZWQ9ZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy51cFZvdGVCdXR0b24udGV4dCA9IHRoaXMudXB2b3RlZCA/ICdVbnVwdm90ZScgOiAnVXB2b3RlJzsNCiAgICB9LA0KICAgIFVwdm90ZUZyZWV0KCl7DQogICAgICAgIGF4aW9zLnBvc3QoIi9hcGkvZnJlZXRzL3Vwdm90ZS8iICsgdGhpcy5mcmVldC5pZCkNCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgICAgZXZlbnRCdXMuJGVtaXQoInVwdm90ZS1mcmVldC1zdWNjZXNzIix7DQogICAgICAgICAgICAgICAgZGF0YTogcmVzcG9uc2UuZGF0YSwNCiAgICAgICAgICAgIH0pOyANCiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKQ0KICAgICAgICAgICAgLy8gdGhpcy5VcGRhdGVTdGF0dXMoKQ0KICAgICAgICAgICAgLy8gdGhpcy51cHZvdGVkPXRydWU7DQogICAgICAgICAgICAvLyB0aGlzLnVwVm90ZUJ1dHRvbi50ZXh0ID0gdGhpcy51cHZvdGVkID8gJ1VudXB2b3RlJyA6ICdVcHZvdGUnOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2Uuc3RhdHVzICE9IDIwMCl7DQogICAgICAgICAgICAgICAgYWxlcnQoZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcikNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgIFVuVXB2b3RlRnJlZXQoKXsNCiAgICAgICAgYXhpb3MucHV0KCIvYXBpL2ZyZWV0cy91bnVwdm90ZS8iICsgdGhpcy5mcmVldC5pZCkNCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgICAgZXZlbnRCdXMuJGVtaXQoInVudXB2b3RlLWZyZWV0LXN1Y2Nlc3MiLHsNCiAgICAgICAgICAgICAgICBkYXRhOiByZXNwb25zZS5kYXRhLA0KICAgICAgICAgICAgfSk7IA0KICAgICAgICAgICAgLy8gdGhpcy51cHZvdGVkPWZhbHNlOw0KICAgICAgICAgICAgLy8gdGhpcy51cFZvdGVCdXR0b24udGV4dCA9IHRoaXMudXB2b3RlZCA/ICdVbnVwdm90ZScgOiAnVXB2b3RlJzsNCg0KICAgICAgICAgICAgLy8gdGhpcy5VcGRhdGVTdGF0dXMoKQ0KICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5zdGF0dXMgIT0gMjAwKXsNCiAgICAgICAgICAgICAgICBhbGVydChlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICB9DQp9DQo="},{"version":3,"sources":["UpvoteButton.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UpvoteButton.vue","sourceRoot":"src/components/Freets","sourcesContent":["<template>\r\n    <div class=\"upvote\">\r\n    <button  \r\n      class=\"freet-btn\" \r\n      @mouseover=\"showUpvoters=true\"\r\n      @mouseleave=\"showUpvoters=false\"\r\n      v-on:click.prevent=\"upvoted ? UnUpvoteFreet() : UpvoteFreet()\" \r\n      ><i class=\"fa fa-heart \" ></i> {{upVoteButton.text}} {{ freet.numUpvotes }}\r\n    </button>\r\n    <div v-show=\"showUpvoters\">\r\n      <span> {{ freet.upvoters.join(', ')}}</span>\r\n    </div>\r\n    </div>\r\n\r\n</template>\r\n<script>\r\n// import { defineComponent } from '@vue/composition-api'\r\nimport axios from 'axios';\r\nimport { eventBus } from \"../../main\";\r\nexport default {\r\n    name:\"UpvoteButton\",\r\n    props:{\r\n       freet:{\r\n           type: Object,\r\n           required: true\r\n       },\r\n       userName:{\r\n           type: String,\r\n           required: true\r\n       }\r\n   },\r\n    data() {\r\n       return{\r\n            upVoteButton:{\r\n                text: 'Upvote'\r\n            },\r\n            showUpvoters: false,\r\n            upvoted: false,\r\n     \r\n       }\r\n   },\r\n    created() {\r\n        this.UpdateStatus();\r\n        // eventBus.$on([\"upvote-freet-success\", \"unupvote-freet-success\"],() =>{\r\n        //        this.UpdateStatus();\r\n        // })\r\n      \r\n       \r\n  },\r\n    methods:{\r\n        //some problem with this\r\n    UpdateStatus(){\r\n        if(this.freet.upvoters.includes(this.userName)){\r\n            this.upvoted=true;\r\n        }else{\r\n         this.upvoted=false;\r\n        }\r\n        this.upVoteButton.text = this.upvoted ? 'Unupvote' : 'Upvote';\r\n    },\r\n    UpvoteFreet(){\r\n        axios.post(\"/api/freets/upvote/\" + this.freet.id)\r\n            .then((response) => {\r\n            eventBus.$emit(\"upvote-freet-success\",{\r\n                data: response.data,\r\n            }); \r\n            window.location.reload()\r\n            // this.UpdateStatus()\r\n            // this.upvoted=true;\r\n            // this.upVoteButton.text = this.upvoted ? 'Unupvote' : 'Upvote';\r\n            })\r\n            .catch((error) => {\r\n                if (error.response && error.response.status != 200){\r\n                alert(error.response.data.error)\r\n                }\r\n            })\r\n        },\r\n    UnUpvoteFreet(){\r\n        axios.put(\"/api/freets/unupvote/\" + this.freet.id)\r\n            .then((response) => {\r\n            eventBus.$emit(\"unupvote-freet-success\",{\r\n                data: response.data,\r\n            }); \r\n            // this.upvoted=false;\r\n            // this.upVoteButton.text = this.upvoted ? 'Unupvote' : 'Upvote';\r\n\r\n            // this.UpdateStatus()\r\n            window.location.reload()\r\n            })\r\n            .catch((error) => {\r\n                if (error.response && error.response.status != 200){\r\n                alert(error.response.data.error)\r\n                }\r\n            })\r\n        },\r\n   }\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}