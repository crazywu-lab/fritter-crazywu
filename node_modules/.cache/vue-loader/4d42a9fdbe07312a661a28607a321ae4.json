{"remainingRequest":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\src\\components\\Freets\\UpvoteButton.vue?vue&type=style&index=0&id=abb9ec4a&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\src\\components\\Freets\\UpvoteButton.vue","mtime":1636397221817},{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator.DESKTOP-OEMB5PS\\Documents\\GitHub\\a4-yingc133_crazywu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmJ1dHRvbnN7DQogIGRpc3BsYXk6ZmxleDsgDQogIGp1c3RpZnktY29udGVudDpmbGV4LWVuZDsNCiANCn0NCi5yZWQtY29sb3Igew0KY29sb3I6cmVkOw0KfQ0KDQo="},{"version":3,"sources":["UpvoteButton.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"UpvoteButton.vue","sourceRoot":"src/components/Freets","sourcesContent":["<template>\r\n    <div class=\"upvote\">\r\n    <button  \r\n      class=\"button\" \r\n      @mouseover=\"showUpvoters=true\"\r\n      @mouseleave=\"showUpvoters=false\"\r\n      v-on:click.prevent=\"upvoted ? UnUpvoteFreet() : UpvoteFreet()\" \r\n      ><i class=\"fa fa-heart red-color \" ></i> {{upVoteButton.text}} {{ freet.numUpvotes }}\r\n    </button>\r\n    <div v-show=\"showUpvoters\">\r\n      <span> {{ freet.upvoters.join(', ')}}</span>\r\n    </div>\r\n    </div>\r\n\r\n</template>\r\n<script>\r\n// import { defineComponent } from '@vue/composition-api'\r\nimport axios from 'axios';\r\nimport { eventBus } from \"../../main\";\r\nexport default {\r\n    name:\"UpvoteButton\",\r\n    props:{\r\n       freet:{\r\n           type: Object,\r\n           required: true\r\n       },\r\n       userName:{\r\n           type: String,\r\n           required: true\r\n       }\r\n   },\r\n    data() {\r\n       return{\r\n            upVoteButton:{\r\n                text: 'Upvote'\r\n            },\r\n            showUpvoters: false,\r\n            upvoted: false,\r\n     \r\n       }\r\n   },\r\n    created() {\r\n        this.UpdateStatus();\r\n        // eventBus.$on([\"upvote-freet-success\", \"unupvote-freet-success\"],() =>{\r\n        //        this.UpdateStatus();\r\n        // })\r\n      \r\n       \r\n  },\r\n    methods:{\r\n        //some problem with this\r\n    UpdateStatus(){\r\n        if(this.freet.upvoters.includes(this.userName)){\r\n            this.upvoted=true;\r\n        }else{\r\n         this.upvoted=false;\r\n        }\r\n        this.upVoteButton.text = this.upvoted ? 'Unupvote' : 'Upvote';\r\n    },\r\n    UpvoteFreet(){\r\n        axios.post(\"/api/freets/upvote/\" + this.freet.id)\r\n            .then((response) => {\r\n            eventBus.$emit(\"upvote-freet-success\",{\r\n                data: response.data,\r\n            }); \r\n            window.location.reload()\r\n            // this.UpdateStatus()\r\n            // this.upvoted=true;\r\n            // this.upVoteButton.text = this.upvoted ? 'Unupvote' : 'Upvote';\r\n            })\r\n            .catch((error) => {\r\n                if (error.response && error.response.status != 200){\r\n                alert(error.response.data.error)\r\n                }\r\n            })\r\n        },\r\n    UnUpvoteFreet(){\r\n        axios.put(\"/api/freets/unupvote/\" + this.freet.id)\r\n            .then((response) => {\r\n            eventBus.$emit(\"unupvote-freet-success\",{\r\n                data: response.data,\r\n            }); \r\n            // this.upvoted=false;\r\n            // this.upVoteButton.text = this.upvoted ? 'Unupvote' : 'Upvote';\r\n\r\n            // this.UpdateStatus()\r\n            window.location.reload()\r\n            })\r\n            .catch((error) => {\r\n                if (error.response && error.response.status != 200){\r\n                alert(error.response.data.error)\r\n                }\r\n            })\r\n        },\r\n   }\r\n}\r\n</script>\r\n<style scoped>\r\n.buttons{\r\n  display:flex; \r\n  justify-content:flex-end;\r\n \r\n}\r\n.red-color {\r\ncolor:red;\r\n}\r\n\r\n</style>\r\n"]}]}